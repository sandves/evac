function beaconDirective(a){return{scope:{distance:"=",name:"@",x:"="},restrict:"AE",templateUrl:"app/beacons/directives/beacon.html",link:function(b,c,d){var e=angular.element(a);b.getWindowDimensions=function(){return{h:e.height(),w:e.width()}},b.$watch(b.getWindowDimensions,function(a,c){b.windowHeight=a.h},!0),b.windowHeight=500,b.$watch("distance",function(a){var d=d3.scale.linear().domain([0,12]).range([0,b.windowHeight])(a),e=new TimelineLite;e.add(TweenLite.to(c.find(".beacon"),2,{y:d,x:b.x,ease:"easeOutExpo"})),e.play()})}}}!function(){"use strict";function a(a){a.otherwise({redirectTo:"/"})}function b(a,b){a.$on("$routeChangeError",function(a,c,d,e){"AUTH_REQUIRED"===e&&b.path("/login")})}angular.module("app",["ngRoute","firebase","app.auth","app.core","app.landing","app.layout","app.beacons","app.floorplan"]).config(a).run(b),a.$inject=["$routeProvider"],b.$inject=["$rootScope","$location"]}(),function(){"use strict";angular.module("app.auth",[])}(),function(){"use strict";angular.module("app.beacons",["beacon","btford.socket-io","angularMoment"])}(),function(){"use strict";angular.module("app.core",[])}(),function(){"use strict";angular.module("app.floorplan",[])}(),function(){"use strict";angular.module("app.landing",[])}(),function(){"use strict";angular.module("app.layout",[])}(),function(){"use strict";function a(a,b){function c(a){return b.register(a).then(function(){return e.login(a)}).then(function(){return b.sendWelcomeEmail(a.email)})["catch"](function(a){e.error=a})}function d(c){return b.login(c).then(function(){a.path("/beacons")})["catch"](function(a){e.error=a})}var e=this;e.error=null,e.register=c,e.login=d}angular.module("app.auth").controller("AuthController",a),a.$inject=["$location","authService"]}(),function(){"use strict";function a(a,b,c){function d(a){return i.$createUser(a)}function e(a){return i.$authWithPassword(a)}function f(){c.reset(),i.$unauth()}function g(){return i.$getAuth()}function h(a){b.emails.push({emailAddress:a})}var i=a(b.root),j={firebaseAuthObject:i,register:d,login:e,logout:f,isLoggedIn:g,sendWelcomeEmail:h};return j}angular.module("app.auth").factory("authService",a),a.$inject=["$firebaseAuth","firebaseDataService","partyService"]}(),function(){"use strict";function a(){return{templateUrl:"app/auth/authForm.html",restrict:"E",controller:b,controllerAs:"vm",bindToController:!0,scope:{error:"=",formTitle:"@",submitAction:"&"}}}function b(){var a=this;a.user={email:"",password:""}}angular.module("app.auth").directive("gzAuthForm",a)}(),function(){"use strict";function a(a){a.when("/register",{templateUrl:"app/auth/register.html",controller:"AuthController",controllerAs:"vm"}),a.when("/login",{templateUrl:"app/auth/login.html",controller:"AuthController",controllerAs:"vm"})}function b(a,b,c,d){function e(a){return-1!==d.indexOf(a)}c.root.onAuth(function(c){!c&&e(a.path())&&(b.logout(),a.path("/login"))})}angular.module("app.auth").config(a).run(b),a.$inject=["$routeProvider"],b.$inject=["$location","authService","firebaseDataService","PROTECTED_PATHS"]}(),function(){"use strict";function a(a,b,c){var d=this;d.debug=!1,d.rssi=null,d.distance=null,d.connected=!1,d.lastUpdate=null,d.connectionState="closed",d.url="",d.dist=0,d.prediction=0,b.on("beacon-updated",function(a){d.rssi=a.rssi+"dBm";var b="unknown";"undefined"!=typeof a.distance&&(d.dist=a.distance<10?a.distance:10,d.prediction=a.prediction<10?a.prediction:10,b=a.distance.toFixed(3)+"m");var e=c.getRange(a.txPower,a.rssi);isNaN(e)?e="unknown":e+="m",d.distance=b+" ("+e+")",d.lastUpdate=new Date,d.url=a.url}),b.on("connected",function(){d.connected=!0,d.connectionState="open"}),b.on("disconnect",function(){d.connected=!1,d.connectionState="closed",d.rssi=null,d.distance=null}),a.$on("$destroy",function(){b.disconnect()})}angular.module("app.beacons").controller("BeaconsController",a),a.$inject=["$scope","socket","beaconService"]}(),function(){"use strict";function a(){function a(a,b){if(0===b)return-1;var c=1*b/a;if(1>c)return Math.pow(c,10);var d=.89976*Math.pow(c,7.7095)+.111;return d}function b(a,b){var c=a-b,d=Math.pow(10,c/10),e=Math.sqrt(d)/100;return parseFloat(e.toFixed(3))}var c={calculateAccuracy:a,getRange:b};return c}angular.module("app.beacons").factory("beaconService",a)}(),function(){"use strict";function a(a){a.when("/beacons",{templateUrl:"app/beacons/beacons.html",controller:"BeaconsController",controllerAs:"vm",resolve:{user:b}})}function b(a){return a.firebaseAuthObject.$requireAuth()}angular.module("app.beacons").config(a),a.$inject=["$routeProvider"],b.$inject=["authService"]}();var app=angular.module("beacon",[]);beaconDirective.$inject=["$window"],app.directive("beacon",beaconDirective),function(){"use strict";function a(a,b){return a({ioSocket:io.connect(b)})}angular.module("app.beacons").factory("socket",a),a.$inject=["socketFactory","SOCKET_URL"]}(),function(){"use strict";angular.module("app.core").constant("FIREBASE_URL","https://burning-inferno-9647.firebaseio.com/").constant("SOCKET_URL","http://localhost:3000").constant("PROTECTED_PATHS",["/beacons"])}(),function(){"use strict";function a(a){var b=new Firebase(a),c={root:b,users:b.child("users"),emails:b.child("emails"),textMessages:b.child("textMessages")};return c}angular.module("app.core").factory("firebaseDataService",a),a.$inject=["FIREBASE_URL"]}(),function(){"use strict";function a(a,b){function c(){this.name="",this.phone="",this.size="",this.done=!1,this.notified=!1}function d(c){return f||(f=a(b.users.child(c).child("parties"))),f}function e(){f&&(f.$destroy(),f=null)}var f=null,g={Party:c,getPartiesByUser:d,reset:e};return g}angular.module("app.core").factory("partyService",a),a.$inject=["$firebaseArray","firebaseDataService"]}(),function(){"use strict";function a(a){function b(b,c){var d={phoneNumber:b.phone,size:b.size,name:b.name};a.textMessages.push(d),b.notified=!0,c.$save(b)}var c={sendTextMessage:b};return c}angular.module("app.core").factory("textMessageService",a),a.$inject=["firebaseDataService"]}(),function(){"use strict";function a(a){a.when("/floorplan",{templateUrl:"app/floorplan/floorplan.html",controller:"FloorplanController",controllerAs:"vm",resolve:{user:b}})}function b(a){return a.firebaseAuthObject.$requireAuth()}angular.module("app.floorplan").config(a),a.$inject=["$routeProvider"],b.$inject=["authService"]}(),function(){"use strict";function a(){var a=this;a.rooms=["1012","1013"]}angular.module("app.floorplan").controller("FloorplanController",a)}(),function(){"use strict";function a(a){a.when("/",{templateUrl:"app/landing/landing.html"})}angular.module("app.landing").config(a),a.$inject=["$routeProvider"]}(),function(){"use strict";function a(){return{templateUrl:"app/layout/navbar.html",restrict:"E",scope:{},controller:b,controllerAs:"vm"}}function b(a,b){function c(){b.logout(),a.path("/")}function d(b){return b===a.path()}var e=this;e.isLoggedIn=b.isLoggedIn,e.logout=c,e.isActive=d}angular.module("app.layout").directive("gzNavbar",a),b.$inject=["$location","authService"]}();